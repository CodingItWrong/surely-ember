<div {{did-update this.resetStateIfModelChanged @category}}>
  {{#if @error}}
    <div class="card">
      <h2
        class="card-title"
        data-test-error-message
      >
        Error loading category
      </h2>
    </div>
  {{else}}
    <PaperCard as |card|>
      <PaperForm
        onSubmit={{this.handleSave}}
        data-test-category-edit-form
        as |form|
      >
        <card.content>
          <div
            class="form-group"
            data-test-category-name-field
          >
            <label for="category-name-field">
              Category Name
            </label>
            <Input
              @value={{this.editedName}}
              {{on "keydown" this.handleTitleKeyDown}}
              type="text"
              id="category-name-field"
              required
              class="form-control title-input"
              data-test-category-name-field
            />
          </div>
          {{#if this.error}}
            <p
              class="error-text"
              data-test-error-message
            >
              {{this.error}}
            </p>
          {{/if}}
        </card.content>
        <card.actions class="app-button-container">
          <PaperButton
            @onClick={{@onCancel}}
            data-test-cancel-edit-button
          >
            Cancel
          </PaperButton>
          {{#if @onDelete}}
            <PaperButton
              @onClick={{this.handleDelete}}
              data-test-delete-button
            >
              Delete
            </PaperButton>
          {{/if}}
          <form.submit-button
            @raised={{true}}
            @primary={{true}}
            @disabled={{this.saving}}
            data-test-save-button
          >
            {{paper-icon "save"}}
            {{#if this.saving}}
              Savingâ€¦
            {{else}}
              Save
            {{/if}}
          </form.submit-button>
        </card.actions>
      </PaperForm>
    </PaperCard>
  {{/if}}
</div>
